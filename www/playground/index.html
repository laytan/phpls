<!DOCTYPE html>
<html lang="en">
    <head>
        <title>ElePHP Playground</title>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css"
        />
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.12.0/cdn.min.js"
            defer
        ></script>
    </head>
    <body>
        <main
            x-data="{input: '', output: '', isParseMode: true}"
            class="container"
        >
            <h1>ElePHP Playground</h1>
            <hr />
            <label for="input">Code:</label>
            <textarea
                x-model="input"
                @input="output = await (isParseMode ? parse(input) : lex(input))"
                class="u-full-width"
                id="input"
                style="height: 30vh"
            ></textarea>
            <button @click="isParseMode = !isParseMode">
                Toggle parse/lex
            </button>
            <button
                @click="output = await (isParseMode ? parse(input) : lex(input))"
            >
                GO
            </button>
            <pre x-text="output"></pre>
        </main>
    </body>
    <script>
        async function parse(input) {
            console.log(input);
            let response = await fetch("/api/parse", {
                method: "POST",
                body: input,
            });
            return await response.text();
        }

        async function lex(input) {
            let response = await fetch("/api/lex", {
                method: "POST",
                body: input,
            });
            return await response.text();
        }
    </script>
</html>
